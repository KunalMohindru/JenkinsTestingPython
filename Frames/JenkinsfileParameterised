pipeline {
    agent any

    parameters {
        choice(name: 'browser_name', choices: ['chrome', 'edge', 'headless'])
    }

    stages {
        stage('Install dependencies') {
            steps {
                bat """
                pip install -r Frames\\requirements.txt
                """
            }
        }  

        stage('print') {
            steps {
                echo "Running tests with ${params.browser_name}  mode"
            }
        }            

        stage('Run Tests') {

            steps {
                bat """
                pytest -s -v --brower_name=${params.browser_name} Frames\\Test\\test_google.py
                """
            }
        }
    }
}
